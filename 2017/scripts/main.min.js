"use strict";!function(e,t,a){({init:function(){this.cache(),this.events(),this.initHeadroom(),this.initWaypoints(),this.scrollToHash()},cache:function(){this.$win=e(t),this.$doc=e(a),this.$html=e("html"),this.$body=e("body"),this.$mainWrap=e("main"),this.$header=e(".js-header"),this.$mobileNav=e(".js-mobile-nav"),this.$hamburger=e(".js-hamburger")},events:function(){var t=this;this.$doc.on("click",".js-hamburger",function(e){return t.showMobileNav(e)}),this.$doc.on("mouseover",".js-imagine",function(e){return t.imagineBg(e)}),this.$doc.on("mouseleave",".js-imagine-header",function(e){return t.imagineBgLeave(e)}),this.$doc.on("mouseleave",".js-pie-chart",function(e){return t.hideTooltip(e)}),this.$doc.on("click",".js-close-tooltip",function(e){return t.hideTooltip(e)}),this.$doc.on("click","[data-scroll-to]",function(e){return t.scrollToSection(e)}),this.$doc.on("click",".js-read-more",function(e){return t.readMore(e)}),this.$doc.on("click",".js-share",function(e){return t.openShareWindow(e)}),e(".hero").length&&this.$win.on("scroll",function(e){return t.heroScroll(e)}),e(".js-heading-fade").length&&this.$win.on("scroll",function(e){return t.headingScroll(e)}),this.$doc.on("click",".js-nav-parent",function(e){return t.displaySubnav(e)})},displaySubnav:function(t){return t.preventDefault(),e(".nav--sub").toggleClass("is-active"),!1},headingScroll:function(t){var a=1-(this.$win.scrollTop()-e(".js-heading-fade").offset().top+200)/150;e(".js-heading-fade").css("opacity",a)},heroScroll:function(t){var a=1-this.$win.scrollTop()/250;e(".hero__base").css("opacity",a),e(".hero__scroll").css("opacity",a),e(".js-heading-fade").css("opacity",a)},openShareWindow:function(a){var n=e(a.currentTarget).attr("href");if("mailto"!=n.substr(0,6)){a.preventDefault();t.open(n,"","width=600, height=400").opener=null}},readMore:function(t){t.preventDefault();var a=e(t.currentTarget);a.text(function(e,t){return"Read more"===t?"Read less":"Read more"}),a.closest("div.stories__text").toggleClass("is-active")},scrollToSection:function(t){var a=e(t.currentTarget),n=a.data("scroll-to");n&&(e("html, body").animate({scrollTop:e("#"+n).offset().top},2e3),this.$mobileNav.removeClass("is-active"),this.$hamburger.removeClass("is-active"),this.$body.removeClass("has-nav"))},scrollToHash:function(){var t=a.location.hash;return t&&(e("html, body").animate({scrollTop:e(t).offset().top},2e3),this.$mobileNav.removeClass("is-active"),this.$hamburger.removeClass("is-active"),this.$body.removeClass("has-nav")),!1},hideTooltip:function(){e(".js-tooltip").hide().removeClass("is-active"),this.$body.removeClass("has-tooltip")},displayTooltip:function(t,n){t.preventDefault();var i=e(t.target),s=a.querySelector(".js-tooltip-"+i.data("tooltip"));if(n){e(".js-tooltip").hide(),e(s).show();var o=t.clientX,r=t.clientY;s.style.top=r+20+"px",s.style.left=t.pageX+s.clientWidth<a.body.clientWidth?o+20+"px":a.body.clientWidth-s.clientWidth+"px"}else e(".js-tooltip").hide(),this.$body.addClass("has-tooltip"),e(s).show().addClass("is-active");return!1},imagineBgLeave:function(){e(".js-imagine, .imagine__bg, .imagine__content").removeClass("is-active is-hidden")},imagineBg:function(t){var a=e(t.currentTarget);e(".js-imagine").removeClass("is-active").addClass("is-hidden"),a.removeClass("is-hidden").addClass("is-active");var n=a.data("image");e(".imagine__bg").removeClass("is-active"),e(".imagine__content").addClass("is-active"),e(n).addClass("is-active")},initHeadroom:function(){new Headroom(a.querySelector(".js-header"),{offset:0,tolerance:10}).init()},showMobileNav:function(e){e.preventDefault(),this.$mobileNav.toggleClass("is-active"),this.$hamburger.toggleClass("is-active"),this.$body.toggleClass("has-nav")},initWaypoints:function(){if(e(".js-hero-home").length){new Waypoint({element:a.querySelector(".js-hero-home"),handler:function(){anime({targets:["#text-mask tspan"],opacity:[0,1],x:a.body.clientWidth<700?["-15%","7%"]:["-15%","10%"],offset:500,easing:"easeOutExpo",duration:2e3,delay:function(e,t){return 400*t}}),this.destroy()},offset:"60%"}),new Waypoint({element:a.querySelector(".js-hero-home"),handler:function(){anime({targets:[".hero__svg tspan"],opacity:[0,1],offset:500,easing:"easeOutExpo",duration:2e3,delay:function(e,t){return 200}}),this.destroy()},offset:"60%"})}if(e(".bricks__text--desktop").length&&a.body.clientWidth>700){new Waypoint({element:a.querySelector(".bricks-svg"),handler:function(){anime.timeline().add({targets:[".billions-letter-group"],opacity:[0,1],translateX:[-100,0],duration:700,offset:400,easing:"easeOutBack",delay:function(e,t){return 400*t}}).add({targets:[".billions-letter-group-last"],opacity:[0,1],translateX:[100,0],duration:700,easing:"easeOutBack",offset:3500}).add({targets:[".bricks-mask"],duration:5e3,offset:100,opacity:{value:[0,1],duration:500},easing:"easeOutQuint",translateY:["-250%",0],translateX:["-250%",0]}),this.destroy()},offset:"90%"})}if(e(".bricks__text--mobile").length&&a.body.clientWidth<700){new Waypoint({element:a.querySelector(".bricks__text--mobile"),handler:function(){anime.timeline().add({targets:[".billions-letter-group"],opacity:[0,1],translateX:[-100,0],duration:700,offset:400,easing:"easeOutBack",delay:function(e,t){return 400*t}}).add({targets:[".billions-letter-group-last"],opacity:[0,1],translateX:[100,0],duration:700,easing:"easeOutBack"}).add({targets:[".bricks-mask-mobile"],duration:7e3,offset:100,opacity:{value:[0,1],duration:500},easing:"easeOutQuint",translateY:["-250%",0],translateX:["-250%",0]}),this.destroy()},offset:"89%"})}if(e(".we-are").length){new Waypoint({element:a.querySelector(".we-are"),handler:function(){anime.timeline().add({targets:["#we-are-arrow"],points:{value:"906.486 168.81 -1 168.81 -1 447.61 67.68 447.61 67.68 237.49 906.486 237.49 906.486 328.31 1031.606 203.15 906.486 77.99"},duration:1e3,easing:"easeOutExpo"}).add({targets:[".js-bubbles .circle"],scale:[.8,1],duration:500,offset:200,easing:"easeOutExpo",delay:function(e,t){return 150*t}}).add({targets:[".js-bubbles .bubbles-arrow"],rotateZ:"7deg",translateY:[-30,20],opacity:[0,1],duration:2e3,offset:500}).add({targets:["#bubbles-lines path","#bubbles-lines-mobile path"],strokeDashoffset:[1400,2800],easing:"linear",duration:500,offset:500,delay:function(e,t){return 150*t}}).add({targets:["#bubbles-lines-2 path","#bubbles-lines-mobile-2 path"],strokeDashoffset:[anime.setDashoffset,0],easing:"easeOutQuint",duration:500,offset:1e3,delay:function(e,t){return 150*t}}),this.destroy()},offset:"90%"})}if(e(".js-heading").length)for(var t=a.getElementsByClassName("js-heading"),n=0;n<t.length;n++)new Waypoint({element:t[n],handler:function(){anime({targets:this.element,translateX:[-20,0],opacity:[0,1],duration:500,easing:"easeOutSine"}),this.destroy()},continuous:!0,offset:"50%"});if(e(".visits").length){new Waypoint({element:a.querySelector(".visits"),handler:function(){var t=anime.timeline();e(".js-burst path:nth-child(even)");t.add({targets:[".js-visits-number .zeros"],opacity:[0,1],translateY:[100,0],easing:"easeOutQuint",duration:1e3,delay:function(e,t){return 500*t}}).add({targets:[".js-visits-desc span"],opacity:[0,1],scale:[.9,1],easing:"easeOutQuint",duration:750,offset:1700,delay:function(e,t){return 250*t}}).add({targets:[".js-burst"],opacity:.75,easing:"linear",offset:400}).add({targets:[".js-burst .burst"],easing:"easeOutQuint",duration:9e4,offset:500,strokeDashoffset:[anime.setDashoffset,0]}),this.destroy()},offset:"60%"})}if(e(".js-visits-circle").length){new Waypoint({element:a.querySelector(".js-visits-circle"),handler:function(){anime({targets:[".js-visits-circle div"],scale:[.7,1],easing:"easeInOutBack",duration:1e3}),this.destroy()},offset:"60%"})}if(e(".new-articles").length){new Waypoint({element:a.querySelector(".new-articles"),handler:function(){var e=anime.timeline(),t={articlesTotal:1};e.add({targets:[".js-articles span"],opacity:[0,1],translateY:[100,0],easing:"easeOutQuint",duration:750,delay:function(e,t){return 250*t},offset:200}).add({targets:t,articlesTotal:5,round:1,duration:1e3,easing:"linear",offset:200,update:function(){a.querySelector(".js-new-articles").innerHTML=t.articlesTotal}}).add({targets:[".js-arrow-big"],easing:"easeOutQuint",translateY:[500,0],opacity:[0,1],offset:200,duration:1e3}).add({targets:[".js-new-articles-desc"],easing:"easeOutQuint",translateX:[100,0],opacity:[0,1],offset:200,duration:1e3}),this.destroy()},offset:"25%"})}if(e(".countries").length){new Waypoint({element:a.querySelector(".countries"),handler:function(){var t=anime.timeline(),n=a.querySelectorAll(".js-dots path"),i=Array.prototype.slice.call(n,0),s=i.sort(function(){return.5-Math.random()}),o=s.slice(0,200);e(o).css("opacity",0),t.add({targets:o,opacity:{value:[0,1],duration:500},easing:"easeOutQuint",duration:150,delay:function(e,t){return 50*t}}).add({targets:[".countries .grid__column"],opacity:[0,1],scale:[.9,1],easing:"easeOutQuint",duration:1e3,offset:0,delay:function(e,t){return 500*t}}),this.destroy()},offset:"85%"})}if(e(".seconds").length){new Waypoint({element:a.querySelector(".seconds"),handler:function(){anime.timeline().add({targets:[".js-seconds span"],opacity:[0,1],translateY:[100,0],easing:"easeOutQuint",duration:1e3,offset:200,delay:function(e,t){return 250*t}}).add({targets:[".js-slash path"],translateX:[-100,0],opacity:[0,1],easing:"easeOutQuart",duration:750,offset:700}),this.destroy()},offset:"50%"})}if(e(".js-imagine-header").length){new Waypoint({element:a.querySelector(".imagine"),handler:function(){anime.timeline().add({targets:[".js-imagine-header"],translateY:[100,1],easing:"easeOutQuart",duration:2e3}).add({targets:[".imagine__content .button--nav"],translateX:[-20,0],opacity:[0,1],duration:500,offset:200,easing:"easeOutSine"}),this.destroy()},offset:"75%"})}if(e(".js-financials-dots").length){new Waypoint({element:a.querySelector(".js-financials-dots"),handler:function(){anime({targets:[".js-financials-dots .blue-dots path"],fill:["#231F20","#009EE2"],easing:"easeOutBack",duration:500,scale:[1.3,1],delay:function(e,t){return 250*t}}),this.destroy()},offset:"55%"})}if(e(".stories__article").length)for(var i=a.getElementsByClassName("stories__article"),s=0;s<i.length;s++)!function(e){var t=i[e].getElementsByClassName("grid__column");new Waypoint({element:i[e],handler:function(){anime({targets:t,translateY:[50,0],opacity:{value:[0,1],duration:500},duration:2e3,easing:"easeOutSine",delay:function(e,t){return 500*t}}),this.destroy()},continuous:!0,offset:"50%"})}(s);if(e(".js-main-content").length)for(var o=a.getElementsByClassName("js-main-content"),r=0;r<o.length;r++)new Waypoint({element:o[r],handler:function(){anime({targets:this.element,translateY:[50,0],opacity:{value:[0,1],duration:500},duration:2e3,easing:"easeOutSine"}),this.destroy()},continuous:!0,offset:"75%"});if(e(".grid--donors").length)for(var l=a.getElementsByClassName("grid--donors"),u=0;u<l.length;u++)!function(e){var t=l[e].getElementsByClassName("grid__column");new Waypoint({element:l[e],handler:function(){anime({targets:t,translateY:[50,0],opacity:{value:[0,1],duration:500},duration:2e3,easing:"easeOutSine",delay:function(e,t){return 500*t}}),this.destroy()},continuous:!0,offset:"100%"})}(u);if(e(".stats").length)for(var d=a.getElementsByClassName("js-stats-item"),c=0;c<d.length;c++)new Waypoint({element:d[c],handler:function(){anime({targets:this.element,translateY:[50,0],opacity:{value:[0,1],duration:500},duration:1e3,easing:"easeOutSine"}),this.destroy()},continuous:!0,offset:"75%"});if(e(".blockquote--stories").length)for(var f=a.getElementsByClassName("blockquote--stories"),h=0;h<f.length;h++)new Waypoint({element:f[h],handler:function(){anime({targets:this.element,translateY:[50,0],opacity:{value:[0,1],duration:500},duration:1e3,easing:"easeOutSine"}),this.destroy()},continuous:!0,offset:"25%"});if(e(".balance-sheet").length){new Waypoint({element:a.querySelector(".js-balance-sheet"),handler:function(){anime({targets:this.element,translateY:[50,0],opacity:{value:[0,1],duration:500},duration:2e3,easing:"easeOutSine"}),this.destroy()},offset:"50%"})}if(e(".js-content-header").length){new Waypoint({element:a.querySelector(".js-content-header"),handler:function(){anime.timeline().add({targets:[".js-content-header .heading--main"],translateY:[30,0],opacity:{value:[0,1],duration:500},duration:2e3,easing:"easeOutSine"}).add({targets:[".js-content-header .blockquote"],translateY:[30,0],opacity:{value:[0,1],duration:500},duration:2e3,offset:200,easing:"easeOutSine"}).add({targets:[".js-content-header .js-thanks",".js-content-header .donors__thanks"],opacity:[0,1],duration:2e3,translateY:[30,0],offset:100,easing:"easeOutSine",delay:function(e,t){return 500*t}}),anime({targets:[".donors__thankyous img"],opacity:[0,1,0],duration:3e3,loop:!0,easing:"easeOutSine",delay:function(e,t){return 2e3*t}}),this.destroy()},offset:"100%"})}if(e(".js-nav-internal").length){new Waypoint({element:a.querySelector(".js-nav-internal"),handler:function(){anime({targets:[".js-nav-internal li"],translateX:[-20,0],opacity:{value:[0,1],duration:500},duration:2e3,easing:"easeOutSine",delay:function(e,t){return 500*t}}),this.destroy()},offset:"50%"})}if(e(".js-blockquote").length)for(var g=a.getElementsByClassName("js-blockquote"),m=0;m<g.length;m++)new Waypoint({element:g[m],handler:function(){anime({targets:this.element,translateY:[50,0],opacity:{value:[0,1],duration:500},duration:1e3,easing:"easeOutSine"}),this.destroy()},continuous:!0,offset:"75%"});if(e(".charity").length){new Waypoint({element:a.querySelector(".charity"),handler:function(){anime.timeline().add({targets:[".charity__stars svg"],translateX:[-50,0],opacity:{value:[0,1],duration:500},duration:300,easing:"easeOutSine",delay:function(e,t){return 300*t}}).add({targets:[".charity p"],translateX:[-50,0],opacity:{value:[0,1],duration:500},duration:300,easing:"easeOutSine"}),this.destroy()},offset:"75%"})}if(e(".pie-chart-small").length){new Waypoint({element:a.querySelector(".pie-chart-small"),handler:function(){anime.timeline().add({targets:[".pie-chart-small-item"],rotateZ:["15deg","0deg"],scale:[.8,1],opacity:{value:[0,1],duration:200},duration:1e3,easing:"easeOutSine"}),this.destroy()},offset:"90%"})}if(e(".financials__header").length){new Waypoint({element:a.querySelector(".financials__header"),handler:function(){anime.timeline().add({targets:[".financials__header svg path"],opacity:[0,1],scale:[.9,1],duration:200,easing:"easeOutExpo",delay:function(e,t){return 150*t}}).add({targets:[".financials__header .heading--main"],translateY:[20,0],opacity:[0,1],duration:500,easing:"easeOutSine"}),this.destroy()},offset:"50%"})}}}).init()}(jQuery,window,document);