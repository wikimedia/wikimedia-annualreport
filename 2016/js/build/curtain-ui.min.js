!function(t,a,e){a(function(){var t,e;e=a(".fetch-more").on("click",function(t){t.preventDefault();var e,n,o;e=a(this),n=e.parents(".shelf-wrapper"),o=n.find(".shelf"),e.addClass("disabled loading"),a.get("/ajax/product-cards",function(t){e.removeClass("disabled loading"),o.append(t)})}),t=a(".shelf-sort").on("change",function(t){t.preventDefault();var e,n,o;e=a(this).parents(".select-wrapper"),n=e.parents(".shelf-wrapper"),o=n.find(".shelf"),e.addClass("disabled loading"),a.get("/ajax/product-cards",function(t){e.removeClass("disabled loading"),o.empty(),o.append(t)})})})}(this,jQuery),!function(t,a,e){a(function(){var t=a("[data-cart-state]");t.one("click",function(t){t.preventDefault(),a(this).addClass("bg-green hover-bg-green").attr("href","/cart").find("span").text("In your cart!")})})}(this,jQuery),function(){function t(t){var a=this,e=t,n=$("body"),o=$(".curtain-wrapper");a.height=0,a.buffer=150,a.init=function(){window.scrollTo(0,1),a.setup(),$(".curtain-arrow").on("click",a.unfurl)},a.setup=function(){a.updateHeight(),n.css({"min-height":2*a.height+buffer}),e.addClass("on"),a.setCurtainFocus(!0),a.bind()},a.reset=function(){n.removeAttr("style"),o.removeClass("on").removeAttr("style"),a.unbind()},a.bind=function(){$(window).on("scroll",a.handleScroll)},a.unbind=function(){$(window).off("scroll")},a.handleScroll=function(t){var e=document.documentElement.scrollTop||$(document).scrollTop();e>=a.getTotalHeight()?(a.setCurtainFocus(!0),n.css({"min-height":o.height()+"px"})):a.setCurtainFocus(!1)},a.setCurtainFocus=function(t){a.updateHeight(),t?(o.attr("style","margin-top: "+a.getTotalHeight()+"px"),o.removeClass("on")):(o.attr("style","margin-bottom: "+a.getTotalHeight()+"px"),o.addClass("on"))},a.updateHeight=function(){return a.height=t.height(),a.height},a.getTotalHeight=function(){return a.height+a.buffer},a.unfurl=function(){var t=a.height+a.buffer;a.unbind(),$("html, body").animate({scrollTop:t},{duration:400,complete:function(){a.bind()}})},a.init()}$(function(){var a=$(".curtain");a.length&&t(a)})}(),!function(t,a,e){a(window).load(function(){a(".fanzone-shelf").masonry({columnWidth:".fanzone-sizer",gutter:".fanzone-gutter",itemSelector:".fanzone-card",percentPosition:!0})}),a(function(){var t=a('[data-poll-form] input[type="submit"]'),e=a("[data-poll-form] [data-poll-results-link]"),n=a("[data-poll-results] [data-poll-form-link]"),o=a("[data-tweet]"),r=a("[data-tweet-char]");t.one("click",function(t){t.preventDefault(),a(this).addClass("disabled").val("Voted").next("a").removeClass("disp-n")}),e.on("click",function(t){t.preventDefault(),a(this).parents("[data-poll-form]").addClass("disp-n").next("[data-poll-results]").removeClass("disp-n")}),n.on("click",function(t){t.preventDefault(),a(this).parents("[data-poll-results]").addClass("disp-n").prev("[data-poll-form]").removeClass("disp-n")}),o.on("input",function(t){var e,n=a(this).val(),i=n,s=new RegExp(/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/);i=i.replace(s,"http://t.co/000000000"),e=140-i.length,0>=e&&(n=n.slice(0,139),o.val(n)),r.html(e)})})}(this,jQuery),!function(t,a,e){a(function(){var t=a("[data-follow-state]");t.one("click",function(t){t.preventDefault(),a(this).addClass("bg-green hover-bg-green").html('<i class="icon-check"></i> ').append("Following series")})})}(this,jQuery),!function(t,a,e){a(function(){var t=a(".heart-btn");t.on("click",function(t){t.preventDefault(),a(this).attr("data-heart-state",function(t,a){return"on"==a?"off":"on"})})})}(this,jQuery),!function(t,a,e){a(function(){var t=a("[data-modal-btn]"),e=a("#overlay");t.on("click",function(t){var n=a(this),o=a(n.attr("href"));targetState=o.attr("data-modal-state"),t.preventDefault(),a("#nav-container").attr("data-nav-state","off"),e.attr("data-overlay-state","off").off(),a("[data-modal-state]").attr("data-modal-state","off"),"on"==targetState?(o.attr("data-modal-state","off"),e.attr("data-overlay-state","off")):(o.attr("data-modal-state","on"),e.attr("data-overlay-state","on"),a("body").removeClass("no-scroll"),window.scrollTo(0,0),e.on("click",function(){o.attr("data-modal-state","off"),e.attr("data-overlay-state","off").off()}))})})}(this,jQuery),!function(t,a,e){a(function(){function t(){e.attr("data-nav-state","closed"),n.attr("data-overlay-state","off").off(),l.removeClass("no-scroll"),i.length&&(i.removeClass("off").addClass("on"),s.removeClass("off"),window.scrollTo(0,i.height()+50))}var e,n,o,r,i,s,l;e=a("#nav-container"),n=a("#overlay"),o=a("[data-nav-open]"),r=a("[data-nav-close]"),i=a(".curtain"),s=a(".curtain-wrapper"),l=a("body"),o.on("click",function(a){a.preventDefault(),e.attr("data-nav-state","open"),n.attr("data-overlay-state","on"),i.length&&(i.removeClass("on").addClass("off"),s.removeClass("on").addClass("off")),window.scrollTo(0,0),l.addClass("no-scroll"),n.on("click",function(){t()})}),r.on("click",function(a){a.preventDefault(),t()})})}(this,jQuery),!function(t,a,e){a(function(){a("#signup-username").on("input",function(t){var e=a(this),n=e.val(),o=a("#signup-username-feedback");n.indexOf(" ")>=0?o.removeClass("disp-n").removeClass("color-green").addClass("color-red").html('<i class="icon-close mar-r-rg"></i>').append("Username must not include spaces"):0==n.length?o.addClass("disp-n"):o.removeClass("disp-n").removeClass("color-red").addClass("color-green").html('<i class="icon-check mar-r-rg"></i>').append("Username available")})})}(this,jQuery),!function(t,a,e){a(function(){var t=a("a[data-tab-group]");t.each(function(){var t=a(this),e=a(t.attr("href"));group=t.attr("data-tab-group"),t.on("click",function(n){n.preventDefault(),a('[data-tab-group="'+group+'"]').attr("data-tab-state","off"),t.add(e).attr("data-tab-state","on")})})})}(this,jQuery),!function(t,a,e){a(function(){var t=a("[data-toggle]");t.each(function(){var t=a(this),e=a(t.attr("data-toggle"));t.add(e).attr("data-toggle-state","off"),t.on("click",function(a){a.preventDefault(),"off"==t.attr("data-toggle-state")?t.add(e).attr("data-toggle-state","on"):t.add(e).attr("data-toggle-state","off")})})})}(this,jQuery),!function(t,a,e){function n(t,a){var e=t.offsetParent().width(),n=t.width(),o=t.position().left,s=t.position().top,l=a.width(),d=a.height(),c=0,f=0;c=o+n/2-l/2,f=s-d-i,r>c?c=r:c>e&&(c=e-r),a.css({left:c+"px",top:f+"px"})}function o(t,a,e){var n=(t.width(),t.position().left),o=a.position().left,r=0;r=Math.floor(n-o),e.css({left:r+"px"})}var r=20,i=50;a(function(){var t=a("[data-tooltip]");t.hover(function(t){var e=a(this),r=e.attr("title"),i=a('<div class="tooltip tooltip-above"></div>');$arrow=a('<span class="tooltip-arrow"></span>'),t.preventDefault(),i.html(r).append($arrow).addClass("hide"),e.before(i),n(e,i),window.setTimeout(function(){o(e,i,$arrow),i.removeClass("hide").addClass("animate")},100),i.on("click",function(){i.remove()})},function(t){a(".tooltip").remove()})})}(this,jQuery);